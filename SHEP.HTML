
<!DOCTYPE html>
<html>
<title>SHEP AI</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<link rel="shortcut icon" href="assets/test1.ico" type="favicon/ico" />
<link rel="icon" href="assets/test1.ico" type="favicon/ico" />
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Karma", sans-serif}
.w3-sidenav a {padding:20px}
</style>
<body onload="cookieprompt()">

<!-- Sidenav (hidden by default) -->
<nav class="w3-sidenav w3-card-2 w3-top w3-xlarge w3-animate-left" style="display:none;z-index:2;width:20%;min-width:300px" id="mySidenav">
  <a href="javascript:void(0)" onclick="w3_close()"
  class="w3-closenav">Close Menu</a>
  <a href="index.html" onclick="w3.close()">Home</a>
  <a href="index.html#about" onclick="w3_close()">About</a>
	<a href="instructions.HTML" onclick="w3_close()">Instructions</a>
  <a href="troubleshooting.HTML" onclick="w3_close()">Troubleshooting</a>
	<a href="contact.HTML" onclick="w3_close()">Contact</a>
  
</nav>

<!-- Top menu -->
<div class="w3-top">
  <div class="w3-black w3-xlarge w3-padding-xlarge" style="max-width:40000px;margin:auto">
    <div class="w3-opennav w3-left w3-hover-text-grey" onclick="w3_open()">☰</div>
    <div class="w3-right">By Dexter Shepherd</div>
    <div class="w3-center">SHEP AI</div>
  </div>
</div>

  <!-- Pagination -->

 <div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px"> 
  <hr id="about">

  <!-- About Section -->
  <div class="w3-container w3-padding-32 w3-center">  
    <h3>SHEP</h3><br>
    <img src="assets/eye.png" alt="FINISHED_PROJECT picture" class="w3-image" style="display:block;margin:auto" width="250" height="250">
    <div class="w3-padding-32">
      <h4><b>SHEP</b></h4>
      <h6><i>A computer would only deserve to be called intelligent if it could deceive a human into believing that it was human. - Alan Turing</i></h6>
		
		<br/>
		<h3>The current system</h3>
		<p>The system currently works out what sort of word each word is within the sentence. After Beta trials of V0.1.1, we found that allowing the user to add
			command words and trigger words both confused, and wasted the time of the user. SHEP would need to pick out parts of sentences, and see what mattered.
			Code was written to take lots of sentences, convert each word to it's word type (verbs, adverbs, nouns ect...) and calculate where they appear.
			We used this data to write SHEP's vocabulary functions.
			<br/><br/>
			Next a subroutine which researched the internet for answers was developed. Last time, the Wikipedia page fell short of what we needed in terms of information.
			The latest version researches using a browser, it finds key information and saves a link. The link is opened every time, so information is kept up to date.
			<br/><br/>
			We continue to work on hardware, making the voice recognition accurate and faster. We want to make it easier to add actions, and indeed get SHEP researching
			how to write python code and saving it, from stack overflow. This means SHEP could write functions to control hardware, and give the user instructions on what to set up.
		<br/><br/>	
	  </div>
	 </div>
			<hr id="aidemo">
		<h3 style="text-align:center;">Demo</h3>
			
	 <p style="text-align:center;">Below shows a basic browser version of the AI. </p>
			
		<div class="console"> 
			<div class="AIbox" id="consoleC">
				<p id="AIoutput">>Use the bottom of the console to type
					
					</p>
				<br/>
				<div  class="inputline">>>> <input type="text" id="AIinput" class="codeinput" name="fname"><br></div>
				
				  
				
		</div></div>
	 <div class="w3-container w3-padding-32 w3-center"> 
	  <div class="w3-padding-32">
			<div class="w3-center w3-padding-32">
				<h5>Try out the different AIs</h5>
    <ul class="w3-pagination .btn-group">
      <li><a class="w3-hover-black" onClick="A()">1</a></li>
      <li><a class="w3-hover-black" onClick="B()">2</a></li>
      <li><a class="w3-hover-black" onClick="C()">3</a></li>
      <li><a class="w3-hover-black" onClick="D()">4</a></li>
      <li><a class="w3-hover-black" onClick="E()">5</a></li>
	  <li><a class="w3-hover-black" onClick="F()">6</a></li>
    </ul>
  </div>
		  <p id="explain">This is the basic version of the AI. It checks your words matches what it knows in the data. Click button 2 to see the next stage, and have a go by typing 
		  where it says: >>></p>
		Select a file to open from: <input type="button" id="file-input" value="Upload" name="myFile" onClick="upload()"><br>
		<br/>
		Download the memory file : <input type="button" name="saveFile" onClick="downloadFile()" value="Download"><br>
		<br/>
		<p style="color:red;"id="errormessages"><p>
		<br/>
		<hr>
		
		
		
		<script id="utility">
			var cookiePermission=false;
			var lines= 6;var characterlength=90;
			function detectmob() { 
			 if( navigator.userAgent.match(/Android/i)
			 || navigator.userAgent.match(/webOS/i)
			 || navigator.userAgent.match(/iPhone/i)
			 || navigator.userAgent.match(/iPad/i)
			 || navigator.userAgent.match(/iPod/i)
			 || navigator.userAgent.match(/BlackBerry/i)
			 || navigator.userAgent.match(/Windows Phone/i)
			 ){
				return true;
			  }
			 else {
				return false;
			  }
			}
			function cookieprompt(){ //get permission from the user
				
				if (window.confirm('SHEP uses cookies to store data, native to your device. By clicking okay, you agree for the AI to store data. Cancel to read out cookie policy')) 
				{
				cookiePermission=true;
				}else{
					window.location.href='cookie.html';
				};
				if(detectmob()){
					//mobile phone screen
					console.log("mobile");
					lines=3;characterlength=20;
					
				}
			}
			function download(filename, text) { //download a file 
			  var element = document.createElement('a');
			  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			  element.setAttribute('download', filename);
				
			  element.style.display = 'none';
			  document.body.appendChild(element);

			  element.click();

			  document.body.removeChild(element);
			 
			}
			function upload()
			{ //upload an existing file from the PC to the browser
				console.log("upload file");
				var input = document.createElement('input');
				input.type = 'file';

				input.onchange = e => { 

				   // getting a hold of the file reference
				   var file = e.target.files[0]; 
					console.log(file.name);
					if(includes(file.name,".asp")){//check it is the correct file type
				   // setting up the reader
				   var reader = new FileReader();
				   reader.readAsText(file,'UTF-8');

				   // here we tell the reader what to do when it's done reading...
				   reader.onload = readerEvent => {
					  var content = readerEvent.target.result; // this is the content!
					  console.log("content:" + content );
					   textFile=content;
					   document.getElementById("errormessages").innerHTML="";
				   }
					}else{
						document.getElementById("errormessages").innerHTML="Incorrect file type";
					}
				}

				input.click();
			}
			function downloadFile(){ //download the file
				download("data.txt",textFile);
			}
			function A(){
				document.getElementById("AIinput").className = "codeinput";
				document.getElementById("consoleC").className = "AIbox";
				loadDoc("test.asp"); //load the file needed
				document.getElementById("AIoutput").innerHTML = ">";
				document.getElementById("explain").innerHTML = "This is the basic version of the AI. It checks your words matches what it knows in the data. Click button 2 to see the next stage, and have a go by typing where it says: >>>";
				type=0;
				learn = false; //will the sysrem learn
			}
			function B(){
				document.getElementById("AIinput").className = "codeinput2";
				document.getElementById("consoleC").className = "AIbox2";
				document.getElementById("AIoutput").innerHTML = ">";
				document.getElementById("explain").innerHTML = "This references your words with the database, analyzes frequency and word distribution to work yout what ou are saying.";
				loadDoc("tree.xml"); //load the file needed
				learn = false; //will the sysrem learn
				type=1;
			}
			function C(){
				document.getElementById("AIinput").className = "codeinput1";
				document.getElementById("consoleC").className = "AIbox1";
				document.getElementById("AIoutput").innerHTML = ">Still in development";
				document.getElementById("explain").value = "";
				learn = false; //will the sysrem learn
				type=2;
			}
			function D(){
				document.getElementById("AIinput").className = "codeinput3";
				document.getElementById("consoleC").className = "AIbox3";
				document.getElementById("AIoutput").innerHTML = ">Still in development";
				document.getElementById("explain").value = "";
				learn = false; //will the sysrem learn
				type=3;
			}
			function E(){
				document.getElementById("AIinput").className = "codeinput4";
				document.getElementById("consoleC").className = "AIbox4";
				document.getElementById("AIoutput").innerHTML = ">Still in development";
				document.getElementById("explain").value = "";
				learn = false; //will the sysrem learn
				type=4;
			}
			function F(){
				document.getElementById("AIinput").className = "codeinput5";
				document.getElementById("consoleC").className = "AIbox5";
				document.getElementById("AIoutput").innerHTML = ">Still in development";
				document.getElementById("explain").value = "";
				learn = false; //will the sysrem learn
				type=5;
			}
		  </script>
			<script id="main">
				var type=0; //set the type of code to run
			var previous="";
			//document.cookie ="";
			var learn = false; //will the sysrem learn
			function sort()
			{
				//sort the memory content into an array
				var phrases= textFile.split('#');
				console.log(phrases.length);
				var array=[];
				var numbers=0;
				for(var i=0;i<phrases.length;i++){
					//sort each words and where they link to.
				     var splitted = ((phrases[i].replace("↵", "").split(',')[0]).split(':')) //get splitted words
					 
					 numbers = (splitted.length);  //get the size of it
					 console.log(numbers+":::"+splitted); //alert user the size
					 
					 array.push(splitted); //add array to array
					 
				}
				console.log(array);
				return array;
				
			}
			function sortdata(phrase){
			//remove out detail	
			var array=textFile.split("<"+phrase+">");
			var sorted=[];
			for(var i=0;i<array.length;i++){
				//remove all uneeded detail
				var string=""
				for(var j=0;j<array[i].length;j++){
					//go through each position
					if(array[i][j]=='<'){ //the word is finished is present 
						//finished
						break;
					}else{
						string+=array[i][j]; //add it to
					}
				}
				sorted.push(string); //add to string
			}
			return sorted;
		}
			function reply(ID)
			{
				//find the correct reply for the given input
				var phrases= textFile.split('#');
				console.log(phrases.length);
				var string = phrases[ID]; //get in string form
				console.log("id to get:",ID," Which is:",phrases[ID]);
				var start = false;var output="";
				for(var i=0;i<string.length;i++){
					//sort ouot what is wanted
					if(start==true)
					{
						output+=string[i]; //gather the spoken bit
					}
					if(string[i]==","){
						start=true; //find change over
					}
				}
				return output.replace(/:/gi," ");//put in spaces
				

				
			}
			function writeTo(words, answers)
			{
				//write the textFile in the format
				document.cookie = "content="+textFile + words.replace(/ /gi,":") + "," + answers.replace(/ /gi,":") + "#"+"; expires=Thu, 01 Jan 2037 00:00:01 GMT";
				textFile = textFile + words.replace(/ /gi,":") + "," + answers.replace(/ /gi,":") + "#";
				console.log(textFile);
			}
			
			function includes(string,substring){
				//returns if a substring is within a substring
				var x=0;
				var i=0;
				var j=0;
				var state=false;
				//console.log(string.length);
				for (i=0;i<string.length;i++){
					
					for(j=0;j<substring.length;j++){
						//console.log(string[x+1]);
						if (j < string.length){
							//console.log(string[x+1]);
							//console.log(string[j]);
							if (string[x+i] == substring[j]){
								x++;
							}
						}	
					}
					if(x == substring.length){
						state=true;
						break;
					}
					x=0
				}
				return state
			}
				function isNumeric(n){ //check for numeric values
			return /^\d+$/.test(n);
		}
		function getPop(){
			//get the popular words by finding the threshold
			var list = sortdata("visited");
			var total=0;
			var n=0;
			var square=0
			for(i=0;i<list.length;i++){
				 //check each word
				if(isNumeric(list[i])){ //a number
					total+=parseInt(list[i]); //add more
					square+=Math.pow(parseInt(list[i]), 2);
					n=n+1; //add one to n
				}
			}
			var average=total/n;
			var sd =Math.sqrt((square/n)-Math.pow(average,2))
			return (average+sd);
		}
		function getWord(word){
			//get the node to, byt finding the node
			var words=sortdata("word");
			var index=-1;
			for(var i=0;i<words.length;i++){
			//new array
				if(word==words[i]){
					//words which are found
					index=i;
				}
			}
			if(index>=0){
				return sortdata("node_to")[index];
			}else{
				return false
			}
		}
		function getVisited(word){
			//get the number of visited to
			var words=sortdata("word");
			var index=-1;
			for(var i=0;i<words.length;i++){
			//new array
				if(word==words[i]){
					//words which are found
					index=i;
				}
			}
			if(index>=0){
				return sortdata("visited")[index];
			}else{
				return false
			}
		}
			function getAI(Userinput) {
				//main algorithm
				var string="";var counter=0;var found=false;var current=0;var saveID=0;
				//console.log(Userinput);
				var words=sort();
				//clear the string of needed characters
				Userinput=Userinput.replace(/,/gi,"");
				Userinput=Userinput.replace(/:/gi,"");
				Userinput=Userinput.replace(/#/gi,"");
				Userinput=Userinput.split(" ")
				console.log("length"+Userinput.length);
				for(var i=0;i<words.length;i++){
					
					for(var j=0;j<words[i].length;j++){
						//console.log(words[i][j]+","+Userinput[j]);
						if(words[i][j]==Userinput[j]){current+=1;}//count each time the word is the same
						//future versions check here for words in slightly different orders
					}
					
					if(counter <current && Userinput.length==words[i].length){
						//find most likely sentence
						counter = current;
						console.log("id"+saveID);
						saveID=i;
					}
					console.log("ID:",saveID," Words:",words[i][0],"::",Userinput[0],"Counter:",counter);
					current=0;
				}
				
				if(counter == words[saveID].length && counter==Userinput.length){ //check if this is the found word
					string=reply(saveID);
				}else{
					string="I don't know that one. How would you like me to respond in the future?";
					learn = true; //learn mode on
				}
			  return string;
			}
			var textFile=null; //define the file
			loadDoc("test.asp"); //load the file needed
			function loadDoc(file) { //read a file
				//takes a while to fully load
			
			  var xhttp = new XMLHttpRequest();
			  xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
				  textFile=this.responseText;
				  if(textFile != null){
					  //text is present
					  console.log("file:"+textFile);
					  
				  }
				}
			  };
			  xhttp.open("GET", file, true); //open the specific file
			  xhttp.send();
			}
			
			console.log("cookie: "+((document.cookie.replace("↵", "")).replace("; expires=Thu, 01 Jan 2037 00:00:01 GMT;", "")).replace("content=","")+"ENDCOOKIE"); //output the file
			function write(message)
			{
				//output in the console box
				message=message.replace('>', '');
				
				var text = document.getElementById("AIoutput");
				var number = (text.innerHTML).length; //get the character length
				var lines = (text.innerHTML).split('>');
				
				if (lines.length >= lines ||number >= characterlength)
				{
					lines=lines.splice(1,lines.length);
					text = lines.join('>');
					document.getElementById("AIoutput").innerHTML  = text;
				}
				document.getElementById("AIoutput").innerHTML  = document.getElementById("AIoutput").innerHTML+ ('<br/>')+('>')+(message);
				
			}
				
				//
  				var User = document.getElementById("AIinput");
				var checker=true;
				User.addEventListener("keyup", function(event) {
					//listen for keys
				  event.preventDefault();
				  
				  if (event.keyCode === 13) {
					  //enter key pressed
					  if(type == 0){ //the type 1 is selected
					  write(User.value.toLowerCase());
					  if(learn == false)
					  {
					  	if(checker==true){ //do this once
							if(textFile==null){
							  //if in debug mode
							  textFile="hello:there,hi#hi,hello#" ; //format of data
						  }else{
							  textFile=textFile+((document.cookie.replace("↵", "")).replace("; expires=Thu, 01 Jan 2037 00:00:01 GMT;", "")).replace("content=","") ; //format of data
						  }	
							checker=false;
						}
					  
					 console.log("file:"+textFile);
						  console.log(document.cookie);
					
					//console.log(User.value);
					previous=User.value.toLowerCase();
					write("Robot message: "+getAI(User.value.toLowerCase()));
					
					
					  }else{
						//learn mode
						 writeTo(previous,User.value);
						  learn=false; //make learn mode be off
						  
					  }
					  document.getElementById("AIinput").value = "";
					}else if(type == 1){
					  var sentence=(User.value).split(" ");//split to sentences
					  var sig=[];//significant words
					  var threshold=getPop();
					  console.log("threshold of significance: "+threshold);
					  for(i=0;i<sentence.length;i++){ //loop through every word
						  var vis=getVisited(sentence[i]);
						  
						  if(vis !=false){
							  if(vis >= threshold){ //word is deemed significant
								  sig.push(sentence[i]);
							  }
						  }
					  }
					  console.log("significant words: "+sig);
					  write("User input: "+User.value);
					  write("What you are trying to find out/say: "+sig);
					  document.getElementById("AIinput").value = "";
					  var other = "";
					  for(i=0;i<sentence.length;i++){
						  var found=0
						  for(j=0;j<sig.length;j++){
							  console.log(sig[j],sentence[i]);
							  if(sig[j]==sentence[i]){
								//found in array 
								  found+=1;
								  
							  }
						}
						  if(found==0){
							  other+=sentence[i]+",";//add the words which have no meaning
						  }
					  }
					  write("What you are discussing: "+other);
				  }else{
					  write("User message: "+User.value);
				  }
				  }
				  
				});
		 	
			
		</script>
			<h3>Older versions</h3>
		<h5>0.0.2</h5>
      <p>The system is able to read a main file and create files and create pathway links depending on what is in the input. The system is able to expand its knowledge through a series of text files with links to eachother. 

The system has speech to text for its main input. By using serial communication, the AI can receive and send data to an Arduino, this Arduino has servos which can read <br />its own position so the user can record actions and play them on command. The data from the servos will store on a local SD card.

The AI has audio output text to speech on top to make it a full audio I/O system. The system has a graphical interface which allows you to interact.
The system has a data file organized alphabetically with every word in the English language, the user has added, and what they categorize as. This system runs on raspberry pi and desktop, although SHEP is set up on the Pi. 
		  <br/>
<img src="assets/prod.jpg" alt="SHEP GUI	" style="width:304px;height:200px;">
		  <br/>
<br />Above shows SHEP on a touch screen TFT. This is SHEP's head, the USB ports on the side are used to connect to an external sound card, a wireless internet dongle and an Arduino for serial output (actions)
<br /><br />We want SHEP's data files to expand in knowledge and social responses so SHEP can appear to be human and appear to be understanding.
SHEP is being developed further so it can reply based on the topic of conversation instead of just reading and writing what is in its data. 
We want SHEP to further be able to apply logic to input and output by recording lgic in its data. This means SHEP could apply knowledge to different situations.
<br />The SHEP AI projects is only being developed by one programmer at its current stage, This means that programming is taking longer than it could.
<br />SHEPY is a 'dumbed down' version of SHEP. It does not have the same understanding of language as SHEP does but it simply learns through conversation. It is a
		  test for algorithms, and simple to modify using its source code provided.

<br /><br /><td><a href="downloads/SHEP4.zip"download>Download Demo SHEP for windows</a></td>
<br /><br /><td><a href="downloads/SHEPY.zip"download>Download SHEPY source code</a></td>
		
		  <br /><br /><td><a href="downloads/manual.pdf"download>Version 0.0.6 instructions</a></td>
<br /><br />
<br /><br />Demo SHEP does not have audio capabilities however it uses text.
<br /><br />This SHEP Code is Copyright by Dexter Shepherd on the 18/02/2017 as SHEP AI©
<br /><br />The voice input demo will require a USB speech to text device. Any device which sends through a string of text and enter button will work. SHEP
is being developed to have USB inputs which work specifically using cameras and voice recognition.
<br />SHEP has a menu which allows you to read information and add to its English language database. 
		  <br/>
		  <br/>
		  
		  SHEP formerly sorted
data out into a trigger word, subject word and command word. 
<br />In the sentence "how are you feeling", we see "how" as the trigger to trigger a question, "feeling" as the subject and
"you" is the command. "how" tells the computer what kind of sentence it is, this case being a question. "feeling" tells the computer what you are
 talking about, in this case being feelings. "you" tells the computer you are asking it how it is feeling, within the "feeling" folder it will have "you" and the
		   learned response.
<br />"How you" on its own tells anyone it is a question about the person receiving. This could be regarding anything 
such as "how do you sing", "sing" would be the command to differ from "are". 
<br /><br />More examples are "who is Winston Churchill":
<br />"who" = question
<br />"Churchill" = subject
<br />"is" = command
<br /><br />There will be a file called Churchill which gathers data about him. Command words will 
create information key points in SHEP's brain. "is" "born" "job".
		  

<br /><br />SHEP has been under development since 2014 and the theory of SHEP developed since 2013. 
<br />SHEP's first version was on C++ written by Dexter Shepherd. SHEP didn't work as the theory was still under development
<br />but SHEP continued as a project. 
<br />It was only until 2015 SHEP became a learning algorithm and started to develop rapidly from a text data analyser, all the way to a network of files linking the English language.
<br /><br />SHEP is currently being developed so it can not only learn from the user, but learn from watching people communicate and saving these responses in its data. 
<br />This is based off of how a human learns.
<br />

</div>
  </div>
  <hr>
  
  <!-- Footer -->
  <footer class="w3-row-padding w3-padding-32">
    <div class="w3-third">
      <h3></h3>
      <p></p>
      <p></p>
    </div>
  
    

    <div class="w3-third w3-serif">
      <h3></h3>
      <p>
        
      </p>
    </div>
  </footer>

<!-- End page content -->
</div>

<script>
// Script to open and close sidenav
function w3_open() {
    document.getElementById("mySidenav").style.display = "block";
}
 
function w3_close() {
    document.getElementById("mySidenav").style.display = "none";
}
</script>

</body>
</html>